<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookfilm</title>
    <link rel="stylesheet" href="estilo.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
   
</head>
<body>
     <header>
        <img class="logo" src="img/logo2.png" >
        <button id="abrir" class="abrir-menu"><i class="bi bi-list"></i></button>
        <nav class="nav" id="nav">
            <button class="cerrar-menu" id="cerrar"><i class="bi bi-x"></i></button>
            <ul class="nav-list">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="PELICULAS.html">Peliculas</a></li>
                <li><a href="SERIES.html">Series</a></li>
                <li><a href="LIBROS.html">libros</a></li>
                    <li><a href="contacto.html">Contactanos</a></li>
                    <li><a href="FAVORITOS.html">favoritos</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section>
        <h2 class="titulo">Peacemaker</h2>
     <div class="multimedia">
       <img src="img/peacemaker.jpg" alt="cover" class="cover">
       <video muted controls class="trailer"> 
       <source src="video/trailer19.mp4" type="video/mp4">
       </video>
       </div>
        <p class="sinopsis">El origen del superh칠roe de DC tan dedicado a la paz mundial que est치 dispuesto a usar la fuerza de las armas para lograrlo.</p>

        <div>
            <ul>
                <li class="calificacion"><span>calificacion: </span>4.1 estrellas</li>
            </ul>
            <ul>
                <li class="calificacion"><span>capitulos: </span>16</li>
                <li class="calificacion"><span>temporadas: </span>2</li>
                <li class="calificacion"><span>duracion por capitulo: </span>40 min</li>
                <li class="a침o"><span>a침o de lanzamiento: </span>2022 - 
</li>
            </ul>
        </div>

<button onclick="agregarAFavoritos()" class="btn-favorito"> Agregar a Favoritos<i class="bi bi-heart"></i></button>

        <div class="info">
        <h4>creaci칩n</h4>
          <li><a href="#">
James Gunn</a></li>
   
        
    

   

         <h4>elenco</h4>
          <li><a href="#">John Cena</a></li>
          <li><a href="#">Danielle Brooks</a></li>
          <li><a href="#">Freddie Stroma </a></li>
        </div>
       
        <div class="generos">
        <h3>Generos</h3>
   
        <li><a href="DRAMA.html">drama</a></li>
        <li><a href="COMEDIA.html">Comedia</a></li>
        <li><a href="ACCION.html">accion</a></li>

       </div>
     
       
       </section>

    </main>
   


<div class="seccion-comentarios-A">
 <h2>Iniciar sesi칩n o registrarse</h2>
<div id="login-register">
  <input type="text" id="username" placeholder="Usuario" />
  <input type="password" id="password" placeholder="Contrase침a" />
  <button onclick="login()">Iniciar sesi칩n</button>
  <button onclick="register()">Registrarse</button>
</div>

<div id="zona-usuario" style="display: none;">
  <p>Hola, <span id="usuario-activo"></span> <button onclick="cerrarSesion()">Cerrar sesi칩n</button></p>
</div>

<h3>Comentarios</h3>
<textarea id="comentario"></textarea>
<button onclick="guardarComentario()">Publicar</button>
<div id="comentarios"></div>

<script>
  const usuariosKey = "usuarios";
  const sesionKey = "usuarioActivo";
  const comentariosKey = "comentarios_" + window.location.pathname;

  function obtenerUsuarios() {
    return JSON.parse(localStorage.getItem(usuariosKey) || "[]");
  }

  function guardarUsuarios(lista) {
    localStorage.setItem(usuariosKey, JSON.stringify(lista));
  }

  function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    const usuarios = obtenerUsuarios();
    const existe = usuarios.find(u => u.nombre === user && u.clave === pass);
    if (existe) {
      localStorage.setItem(sesionKey, user);
      mostrarZonaUsuario();
    } else {
      alert("Usuario o contrase침a incorrectos.");
    }
  }

  function register() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    if (!user || !pass) return alert("Completa los campos.");
    let usuarios = obtenerUsuarios();
    if (usuarios.find(u => u.nombre === user)) {
      return alert("Ese usuario ya existe.");
    }
    usuarios.push({ nombre: user, clave: pass });
    guardarUsuarios(usuarios);
    alert("Registro exitoso. Ahora inicia sesi칩n.");
  }

  function cerrarSesion() {
    localStorage.removeItem(sesionKey);
    location.reload();
  }

  function mostrarZonaUsuario() {
    const usuario = localStorage.getItem(sesionKey);
    if (usuario) {
      document.getElementById("login-register").style.display = "none";
      document.getElementById("zona-usuario").style.display = "block";
      document.getElementById("usuario-activo").innerText = usuario;
    }
    mostrarComentarios();
  }

  function guardarComentario() {
    const texto = document.getElementById("comentario").value;
    const user = localStorage.getItem(sesionKey);
    if (!user) return alert("Debes iniciar sesi칩n para comentar.");
    if (!texto.trim()) return;

    let comentarios = JSON.parse(localStorage.getItem(comentariosKey) || "[]");
    comentarios.push({ autor: user, texto });
    localStorage.setItem(comentariosKey, JSON.stringify(comentarios));
    document.getElementById("comentario").value = "";
    mostrarComentarios();
  }

  function mostrarComentarios() {
    const comentarios = JSON.parse(localStorage.getItem(comentariosKey) || "[]");
    const contenedor = document.getElementById("comentarios");
    contenedor.innerHTML = "";
    const usuario = localStorage.getItem(sesionKey);
    comentarios.forEach((c, i) => {
      const div = document.createElement("div");
      div.className = "comentario";
      div.innerHTML = `<strong>${c.autor}</strong>: ${c.texto}`;
      if (c.autor === usuario) {
        const btn = document.createElement("button");
        btn.textContent = "Eliminar";
        btn.onclick = () => eliminarComentario(i);
        div.appendChild(btn);
      }
      contenedor.appendChild(div);
    });
  }

  function eliminarComentario(index) {
    let comentarios = JSON.parse(localStorage.getItem(comentariosKey) || "[]");
    comentarios.splice(index, 1);
    localStorage.setItem(comentariosKey, JSON.stringify(comentarios));
    mostrarComentarios();
  }

  mostrarZonaUsuario();
</script>


</div>

</script>

<script>
  const sesion= "usuarioActivo";

  function favoritosKey(usuario) {
    return `favoritos_${usuario}`;
  }

  function obtenerFavoritos(usuario) {
    return JSON.parse(localStorage.getItem(favoritosKey(usuario)) || "[]");
  }

  function guardarFavoritos(usuario, lista) {
    localStorage.setItem(favoritosKey(usuario), JSON.stringify(lista));
  }

  function agregarAFavoritos() {
    const usuario = localStorage.getItem(sesionKey);
    if (!usuario) {
      alert("Debes iniciar sesi칩n para agregar a favoritos.");
      return;
    }

    const titulo = "Peacemaker"; // 游녣 Cambia esto por el t칤tulo de la pel칤cula actual
    let favoritos = obtenerFavoritos(usuario);

    // Verificar si ya est치 en favoritos
    if (favoritos.find(p => p.id === titulo)) {
      alert("Ya est치 en favoritos.");
      return;
    }

    const pelicula = {
      id: titulo, 
      titulo: titulo
    };

    favoritos.push(pelicula);
    guardarFavoritos(usuario, favoritos);
    alert("Agregado a favoritos.");
  }
</script>

 <footer>

        <p></p>
    </footer>
   
   
    <script src="java.js"></script>
</body>
</html>